{"ast":null,"code":"import _classCallCheck from \"/Users/andrecampbell/Desktop/MaxBone/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/andrecampbell/Desktop/MaxBone/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/andrecampbell/Desktop/MaxBone/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/andrecampbell/Desktop/MaxBone/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/andrecampbell/Desktop/MaxBone/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/andrecampbell/Desktop/MaxBone/client/src/components/StyleApp/Chat/SendMessageForm.js\";\nimport React from 'react';\nimport loginController from \"../../../controllers/LoginController\";\nimport axios from 'axios';\nimport MessageList from './MessagesList';\nimport './Chat.css';\n\nvar SendMessageFrom =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(SendMessageFrom, _React$Component);\n\n  function SendMessageFrom() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, SendMessageFrom);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(SendMessageFrom)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      user: true,\n      email: '',\n      message: '',\n      messages: []\n    };\n\n    _this.setUser = function (user) {\n      _this.setState({\n        email: user.user.email\n      }, function () {\n        _this.getMessages();\n      });\n    };\n\n    _this.messageChanged = function (event) {\n      _this.setState({\n        message: event.target.value\n      });\n    };\n\n    _this.submitClicked = function () {\n      _this.sendMessage();\n\n      _this.setState({\n        message: ''\n      });\n    };\n\n    _this.sendMessage = function () {\n      console.log('send messgae');\n      axios.post('/api/chat/send', {\n        email: _this.state.email,\n        message: _this.state.message,\n        user: _this.state.user\n      }).then(function (response) {\n        _this.setState({\n          messages: response.data\n        });\n      }).catch(function (error) {\n        console.log(error);\n      });\n    };\n\n    _this.getMessages = function () {\n      axios.get('/api/chat/receive/', {\n        params: {\n          email: _this.state.email\n        }\n      }).then(function (response) {\n        _this.setState({\n          messages: response.data\n        });\n      }).catch(function (error) {\n        console.log(error);\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(SendMessageFrom, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      loginController.addUserChangedListener(this.setUser);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      loginController.removeUserChangedListener(this.setUser);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, React.createElement(MessageList, {\n        messages: this.state.messages,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"row col-md-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }, React.createElement(\"textarea\", {\n        id: \"chatInput\",\n        style: {\n          width: '80%',\n          height: '100px'\n        },\n        type: \"text\",\n        onChange: this.messageChanged,\n        value: this.state.message,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        id: \"chatSubmit\",\n        onClick: this.submitClicked,\n        type: \"submit\",\n        className: \"\",\n        style: {\n          backgroundImage: 'url(images/sendButton.jpg)',\n          backgroundSize: '40px 40px',\n          backgroundPosition: 'center center'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return SendMessageFrom;\n}(React.Component);\n\nexport default SendMessageFrom;","map":{"version":3,"sources":["/Users/andrecampbell/Desktop/MaxBone/client/src/components/StyleApp/Chat/SendMessageForm.js"],"names":["React","loginController","axios","MessageList","SendMessageFrom","state","user","email","message","messages","setUser","setState","getMessages","messageChanged","event","target","value","submitClicked","sendMessage","console","log","post","then","response","data","catch","error","get","params","addUserChangedListener","removeUserChangedListener","width","height","backgroundImage","backgroundSize","backgroundPosition","Component"],"mappings":";;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,eAAP,MAA4B,sCAA5B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,WAAP,MAAwB,gBAAxB;AACA,OAAO,YAAP;;IAEMC,e;;;;;;;;;;;;;;;;;UAEFC,K,GAAQ;AACJC,MAAAA,IAAI,EAAE,IADF;AAEJC,MAAAA,KAAK,EAAE,EAFH;AAGJC,MAAAA,OAAO,EAAE,EAHL;AAIJC,MAAAA,QAAQ,EAAE;AAJN,K;;UAcRC,O,GAAU,UAACJ,IAAD,EAAU;AAChB,YAAKK,QAAL,CAAc;AAAEJ,QAAAA,KAAK,EAAED,IAAI,CAACA,IAAL,CAAUC;AAAnB,OAAd,EACI,YAAM;AACF,cAAKK,WAAL;AACH,OAHL;AAIH,K;;UAEDC,c,GAAiB,UAACC,KAAD,EAAW;AACxB,YAAKH,QAAL,CAAc;AAAEH,QAAAA,OAAO,EAAEM,KAAK,CAACC,MAAN,CAAaC;AAAxB,OAAd;AACH,K;;UAEDC,a,GAAgB,YAAM;AAClB,YAAKC,WAAL;;AACA,YAAKP,QAAL,CAAc;AAACH,QAAAA,OAAO,EAAE;AAAV,OAAd;AACH,K;;UAGDU,W,GAAc,YAAM;AAChBC,MAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ;AACAlB,MAAAA,KAAK,CAACmB,IAAN,CAAW,gBAAX,EAA6B;AACzBd,QAAAA,KAAK,EAAE,MAAKF,KAAL,CAAWE,KADO;AAEzBC,QAAAA,OAAO,EAAE,MAAKH,KAAL,CAAWG,OAFK;AAGzBF,QAAAA,IAAI,EAAE,MAAKD,KAAL,CAAWC;AAHQ,OAA7B,EAIGgB,IAJH,CAIQ,UAACC,QAAD,EAAc;AACd,cAAKZ,QAAL,CAAc;AAAEF,UAAAA,QAAQ,EAAEc,QAAQ,CAACC;AAArB,SAAd;AACH,OANL,EAOKC,KAPL,CAOW,UAAUC,KAAV,EAAiB;AACpBP,QAAAA,OAAO,CAACC,GAAR,CAAYM,KAAZ;AACH,OATL;AAUH,K;;UAEDd,W,GAAc,YAAM;AAChBV,MAAAA,KAAK,CAACyB,GAAN,CAAU,oBAAV,EAAgC;AAC5BC,QAAAA,MAAM,EAAE;AACJrB,UAAAA,KAAK,EAAE,MAAKF,KAAL,CAAWE;AADd;AADoB,OAAhC,EAIGe,IAJH,CAIQ,UAACC,QAAD,EAAc;AAClB,cAAKZ,QAAL,CAAc;AAAEF,UAAAA,QAAQ,EAAEc,QAAQ,CAACC;AAArB,SAAd;AACH,OAND,EAMGC,KANH,CAMS,UAAUC,KAAV,EAAiB;AACtBP,QAAAA,OAAO,CAACC,GAAR,CAAYM,KAAZ;AACH,OARD;AAUH,K;;;;;;;wCAlDmB;AAChBzB,MAAAA,eAAe,CAAC4B,sBAAhB,CAAuC,KAAKnB,OAA5C;AACH;;;2CAEsB;AACnBT,MAAAA,eAAe,CAAC6B,yBAAhB,CAA0C,KAAKpB,OAA/C;AACH;;;6BA+CQ;AACL,aACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,WAAD;AAAa,QAAA,QAAQ,EAAE,KAAKL,KAAL,CAAWI,QAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,EAEI;AAAK,QAAA,SAAS,EAAE,eAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAU,QAAA,EAAE,EAAC,WAAb;AAAyB,QAAA,KAAK,EAAE;AAAEsB,UAAAA,KAAK,EAAE,KAAT;AAAgBC,UAAAA,MAAM,EAAE;AAAxB,SAAhC;AAAmE,QAAA,IAAI,EAAC,MAAxE;AAA+E,QAAA,QAAQ,EAAE,KAAKnB,cAA9F;AAA8G,QAAA,KAAK,EAAE,KAAKR,KAAL,CAAWG,OAAhI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,EAEI;AAAQ,QAAA,EAAE,EAAE,YAAZ;AAAyB,QAAA,OAAO,EAAE,KAAKS,aAAvC;AAAsD,QAAA,IAAI,EAAC,QAA3D;AAAoE,QAAA,SAAS,EAAC,EAA9E;AAAiF,QAAA,KAAK,EAAG;AAACgB,UAAAA,eAAe,EAAE,4BAAlB;AAAgDC,UAAAA,cAAc,EAAE,WAAhE;AAA6EC,UAAAA,kBAAkB,EAAE;AAAjG,SAAzF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFJ,CAFJ,CADJ;AAUH;;;;EAxEyBnC,KAAK,CAACoC,S;;AA0EpC,eAAehC,eAAf","sourcesContent":["import React from 'react'\nimport loginController from \"../../../controllers/LoginController\"\nimport axios from 'axios'\nimport MessageList from './MessagesList'\nimport './Chat.css';\n\nclass SendMessageFrom extends React.Component {\n\n    state = {\n        user: true,\n        email: '',\n        message: '',\n        messages: []\n    }\n    componentDidMount() {\n        loginController.addUserChangedListener(this.setUser);\n    }\n\n    componentWillUnmount() {\n        loginController.removeUserChangedListener(this.setUser);\n    }\n\n    setUser = (user) => {\n        this.setState({ email: user.user.email },\n            () => {\n                this.getMessages();\n            });\n    }\n\n    messageChanged = (event) => {\n        this.setState({ message: event.target.value });\n    }\n\n    submitClicked = () => { \n        this.sendMessage();\n        this.setState({message: ''});\n    }\n\n\n    sendMessage = () => {\n        console.log('send messgae');\n        axios.post('/api/chat/send', {\n            email: this.state.email,\n            message: this.state.message,\n            user: this.state.user\n        }).then((response) => {\n                this.setState({ messages: response.data })\n            })\n            .catch(function (error) {\n                console.log(error);\n            });\n    }\n\n    getMessages = () => {\n        axios.get('/api/chat/receive/', {\n            params: {\n                email: this.state.email\n            }\n        }).then((response) => {\n            this.setState({ messages: response.data })\n        }).catch(function (error) {\n            console.log(error);\n        });\n\n    }\n\n\n    render() {\n        return (\n            <div>\n                <MessageList messages={this.state.messages} />\n                <div className= 'row col-md-12'>\n                    <textarea id='chatInput' style={{ width: '80%', height: '100px' }} type=\"text\" onChange={this.messageChanged} value={this.state.message} />\n                    <button id= 'chatSubmit' onClick={this.submitClicked} type='submit' className=\"\" style= {{backgroundImage: 'url(images/sendButton.jpg)', backgroundSize: '40px 40px', backgroundPosition: 'center center'}}></button>\n                </div>\n            </div>\n\n        )\n    }\n}\nexport default SendMessageFrom;"]},"metadata":{},"sourceType":"module"}