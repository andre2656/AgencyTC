{"ast":null,"code":"import _classCallCheck from \"/Users/andrecampbell/Desktop/MaxBone/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/andrecampbell/Desktop/MaxBone/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/andrecampbell/Desktop/MaxBone/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/andrecampbell/Desktop/MaxBone/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/andrecampbell/Desktop/MaxBone/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/andrecampbell/Desktop/MaxBone/client/src/components/SignUp/Payment.js\";\nimport React, { Component } from \"react\";\nimport axios from 'axios';\nimport { Link } from 'react-router-dom';\nimport './Payment.css';\nimport loginController from \"../../controllers/LoginController\";\nimport { Modal } from 'react-bootstrap';\n\nvar Payment =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Payment, _Component);\n\n  function Payment() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Payment);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Payment)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      email: '',\n      cardholderName: '',\n      cvv: '',\n      cardNumber: '',\n      month: '',\n      year: ''\n    };\n\n    _this.setUser = function (user) {\n      _this.setState({\n        email: user.user.email\n      });\n    };\n\n    _this.handleCardholderName = function (event) {\n      _this.setState({\n        cardholderName: event.target.value\n      });\n    };\n\n    _this.handleCvv = function (event) {\n      _this.setState({\n        cvv: event.target.value\n      });\n    };\n\n    _this.handleCardNumber = function (event) {\n      _this.setState({\n        cardNumber: event.target.value\n      });\n    };\n\n    _this.handleMonth = function (event) {\n      _this.setState({\n        month: event.target.value\n      });\n    };\n\n    _this.handleYear = function (event) {\n      _this.setState({\n        year: event.target.value\n      });\n    };\n\n    _this.handleClose = function () {\n      _this.setState({\n        show: false\n      });\n    };\n\n    _this.handleShow = function () {\n      _this.setState({\n        show: true\n      });\n    };\n\n    _this.checkPage = function (response) {\n      axios.get('/api/set/ethnicity', {\n        params: {\n          email: _this.state.email\n        }\n      }).then(function (settings) {\n        console.log(settings);\n\n        if (settings.data === null) {\n          window.location.pathname = \"/settings\";\n        } else {\n          window.location.pathname = \"/app\";\n        }\n      });\n    };\n\n    _this.InputValidation = function (event) {\n      console.log(_this.state);\n      event.preventDefault();\n\n      if (_this.state.cardholderName === '' || _this.state.cvv === '' || _this.state.cardNumber === '' || _this.state.month === '' || _this.state.year === '') {\n        _this.handleShow();\n      } else {\n        _this.submitPayment();\n      }\n    };\n\n    return _this;\n  }\n\n  _createClass(Payment, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      console.log(\"componentDidMount\");\n      loginController.addUserChangedListener(this.setUser);\n      loginController.recheckLogin();\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      console.log(\"WillUnmount\");\n      loginController.removeUserChangedListener(this.setUser);\n    }\n  }, {\n    key: \"submitPayment\",\n    value: function submitPayment() {\n      var _this2 = this;\n\n      console.log(\"submitting payment\");\n      axios.post('api/pay/payments', {\n        email: this.state.email,\n        cardholderName: this.state.cardholderName,\n        cvv: this.state.cvv,\n        cardNumber: this.state.cardNumber,\n        month: this.state.month,\n        year: this.state.year\n      }).then(function (response) {\n        _this2.checkPage(response);\n      }).catch(function (error) {\n        console.log(error);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        className: \"col-md-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, \"Confirm Purchase\")), React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-md-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"col-md-4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"name\",\n        className: \"form-control payment-input\",\n        id: \"name\",\n        placeholder: \"Cardholder Name\",\n        onChange: this.handleCardholderName,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"col-md-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control payment-input\",\n        id: \"cvv\",\n        placeholder: \"CVV\",\n        onChange: this.handleCvv,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"col-md-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      })), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-md-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"col-md-6\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"password\",\n        className: \"form-control payment-input\",\n        id: \"number\",\n        placeholder: \"Card Number\",\n        onChange: this.handleCardNumber,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"col-md-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      })), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-md-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"col-md-1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control payment-input\",\n        id: \"month\",\n        placeholder: \"MM\",\n        onChange: this.handleMonth,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"col-md-1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control payment-input\",\n        id: \"year\",\n        placeholder: \"YY\",\n        onChange: this.handleYear,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"col-md-1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }), React.createElement(\"img\", {\n        className: \"col-md-1 card-image\",\n        id: \"visa\",\n        src: \"https://upload.wikimedia.org/wikipedia/commons/1/16/Former_Visa_%28company%29_logo.svg\",\n        width: 60,\n        height: 37,\n        alt: \"Visa\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }), React.createElement(\"img\", {\n        className: \"col-md-1 card-image\",\n        src: \"https://upload.wikimedia.org/wikipedia/commons/thumb/2/2a/Mastercard-logo.svg/1280px-Mastercard-logo.svg.png\",\n        width: 45,\n        height: 39,\n        alt: \"Mastercard\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }), React.createElement(\"img\", {\n        className: \"col-md-1 card-image\",\n        src: \"https://cdn2.iconfinder.com/data/icons/credit-cards-6/156/american_express-512.png\",\n        width: 60,\n        height: 50,\n        alt: \"American-Express\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"col-md-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-md-8\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }), React.createElement(Link, {\n        className: \"sign-up-for-free col-md-1\",\n        to: \"/settings\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        type: \"button\",\n        className: \"btn btn-dark\",\n        id: \"payment-btn\",\n        onClick: this.InputValidation,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }, \"Submit\")))), React.createElement(Modal, {\n        show: this.state.show,\n        onHide: this.handleClose,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }, React.createElement(Modal.Header, {\n        closeButton: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }, React.createElement(Modal.Body, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }, React.createElement(\"h5\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, \"Please fill out all fields before submitting.\"))))));\n    }\n  }]);\n\n  return Payment;\n}(Component);\n\nexport default Payment;","map":{"version":3,"sources":["/Users/andrecampbell/Desktop/MaxBone/client/src/components/SignUp/Payment.js"],"names":["React","Component","axios","Link","loginController","Modal","Payment","state","email","cardholderName","cvv","cardNumber","month","year","setUser","user","setState","handleCardholderName","event","target","value","handleCvv","handleCardNumber","handleMonth","handleYear","handleClose","show","handleShow","checkPage","response","get","params","then","settings","console","log","data","window","location","pathname","InputValidation","preventDefault","submitPayment","addUserChangedListener","recheckLogin","removeUserChangedListener","post","catch","error"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport axios from 'axios';\nimport { Link } from 'react-router-dom';\nimport './Payment.css';\nimport loginController from \"../../controllers/LoginController\"\nimport { Modal } from 'react-bootstrap';\n\n\nclass Payment extends Component {\n    state = {\n        email: '',\n        cardholderName: '',\n        cvv: '',\n        cardNumber: '',\n        month: '',\n        year: ''\n    };\n\n    componentDidMount() {\n        console.log(\"componentDidMount\");\n        loginController.addUserChangedListener(this.setUser);\n        loginController.recheckLogin();\n    }\n\n    componentWillUnmount() {\n        console.log(\"WillUnmount\");\n        loginController.removeUserChangedListener(this.setUser);\n    }\n\n    setUser = (user) => {\n        this.setState({ email: user.user.email });\n    }\n\n    handleCardholderName = (event) => {\n        this.setState({ cardholderName: event.target.value })\n    }\n    handleCvv = (event) => {\n        this.setState({ cvv: event.target.value })\n    }\n    handleCardNumber = (event) => {\n        this.setState({ cardNumber: event.target.value })\n    }\n    handleMonth = (event) => {\n        this.setState({ month: event.target.value })\n    }\n    handleYear = (event) => {\n        this.setState({ year: event.target.value })\n    }\n    handleClose = () => {\n        this.setState({ show: false });\n    }\n    handleShow = () => {\n        this.setState({ show: true });\n    }\n\n\n    submitPayment() {\n        console.log(\"submitting payment\");\n        axios.post('api/pay/payments', {\n            email: this.state.email,\n            cardholderName: this.state.cardholderName,\n            cvv: this.state.cvv,\n            cardNumber: this.state.cardNumber,\n            month: this.state.month,\n            year: this.state.year,\n        })\n            .then((response) => {\n                this.checkPage(response);\n            })\n            .catch(function (error) {\n                console.log(error);\n            });\n    }\n    checkPage = (response) => {\n        axios.get('/api/set/ethnicity', {\n            params: {\n                email: this.state.email\n            }\n        }).then(settings => {\n            console.log(settings)\n            if (settings.data === null) {\n                window.location.pathname = \"/settings\";\n            } else {\n                window.location.pathname = \"/app\";\n            }\n        })\n    }\n\n    InputValidation = (event) => {\n        console.log(this.state);\n        event.preventDefault();\n        if (this.state.cardholderName === '' || this.state.cvv === '' || this.state.cardNumber === '' || this.state.month === '' || this.state.year === '') {\n            this.handleShow();\n        } else {\n            this.submitPayment();\n        }\n    }\n\n    render() {\n        return (\n            <div>\n                <div className=\"container\">\n                    <div className=\"row\">\n                        <h2 className=\"col-md-12\">Confirm Purchase</h2>\n                    </div>\n                    <div className=\"row\">\n                        <div className=\"col-md-3\" />\n                        <div className=\"col-md-4\">\n                            <input type=\"name\" className=\"form-control payment-input\" id=\"name\" placeholder=\"Cardholder Name\" onChange={this.handleCardholderName}></input>\n                        </div>\n                        <div className=\"col-md-2\">\n                            <input type=\"text\" className=\"form-control payment-input\" id=\"cvv\" placeholder=\"CVV\" onChange={this.handleCvv}></input>\n                        </div>\n                        <div className=\"col-md-3\" />\n                    </div>\n                    <br />\n                    <div className=\"row\">\n                        <div className=\"col-md-3\" />\n                        <div className=\"col-md-6\">\n                            <input type=\"password\" className=\"form-control payment-input\" id=\"number\" placeholder=\"Card Number\" onChange={this.handleCardNumber}></input>\n                        </div>\n                        <div className=\"col-md-3\" />\n                    </div>\n                    <br />\n                    <div className=\"row\">\n                        <div className=\"col-md-3\" />\n                        <div className=\"col-md-1\">\n                            <input type=\"text\" className=\"form-control payment-input\" id=\"month\" placeholder=\"MM\" onChange={this.handleMonth}></input>\n                        </div>\n                        <div className=\"col-md-1\">\n                            <input type=\"text\" className=\"form-control payment-input\" id=\"year\" placeholder=\"YY\" onChange={this.handleYear}></input>\n                        </div>\n                        <div className=\"col-md-1\" />\n\n                        <img className=\"col-md-1 card-image\" id=\"visa\" src=\"https://upload.wikimedia.org/wikipedia/commons/1/16/Former_Visa_%28company%29_logo.svg\" width={60} height={37} alt='Visa' />\n                        <img className=\"col-md-1 card-image\" src=\"https://upload.wikimedia.org/wikipedia/commons/thumb/2/2a/Mastercard-logo.svg/1280px-Mastercard-logo.svg.png\" width={45} height={39} alt='Mastercard' />\n                        <img className=\"col-md-1 card-image\" src=\"https://cdn2.iconfinder.com/data/icons/credit-cards-6/156/american_express-512.png\" width={60} height={50} alt='American-Express' />\n                        <div className=\"col-md-3\" />\n\n                    </div>\n                    <div className=\"row\">\n                        <div className=\"col-md-8\" />\n                        <Link className=\"sign-up-for-free col-md-1\" to=\"/settings\"><button type=\"button\" className=\"btn btn-dark\" id=\"payment-btn\" onClick={this.InputValidation}>Submit</button></Link>\n                    </div>\n                </div>\n                <Modal show={this.state.show} onHide={this.handleClose}>\n                    <Modal.Header closeButton>\n                        <Modal.Body>\n                            <div>\n                                <h5 className='row'>Please fill out all fields before submitting.</h5>\n                            </div>\n                        </Modal.Body>\n                    </Modal.Header>\n                </Modal>\n            </div>\n        )\n    }\n}\n\nexport default Payment;"]},"metadata":{},"sourceType":"module"}